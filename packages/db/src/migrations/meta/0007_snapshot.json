{
  "id": "feeb2d7e-224e-451a-a996-723431aa7ec0",
  "prevId": "5244121a-4af7-4eec-8ea6-b48c4e7dc650",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "log_id": {
          "name": "log_id",
          "type": "varchar(26)",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_ulid()"
        },
        "event_type": {
          "name": "event_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "actor_id": {
          "name": "actor_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "idx_audit_entity": {
          "name": "idx_audit_entity",
          "columns": [
            {
              "expression": "entity_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "occurred_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.document_versions": {
      "name": "document_versions",
      "schema": "",
      "columns": {
        "version_id": {
          "name": "version_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "doc_id": {
          "name": "doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "version_type": {
          "name": "version_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "content_text": {
          "name": "content_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "valid_from": {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "valid_until": {
          "name": "valid_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_version_doc_num": {
          "name": "idx_version_doc_num",
          "columns": [
            {
              "expression": "doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "document_versions_doc_id_legal_documents_doc_id_fk": {
          "name": "document_versions_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "document_versions",
          "tableTo": "legal_documents",
          "columnsFrom": ["doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.embedding_cache": {
      "name": "embedding_cache",
      "schema": "",
      "columns": {
        "embedding_id": {
          "name": "embedding_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "fragment_id": {
          "name": "fragment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "model_name": {
          "name": "model_name",
          "type": "embedding_model",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "dimensions": {
          "name": "dimensions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "embedding_vector": {
          "name": "embedding_vector",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_binary": {
          "name": "embedding_binary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "computed_at": {
          "name": "computed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "compute_duration_ms": {
          "name": "compute_duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_embedding_fragment_model": {
          "name": "idx_embedding_fragment_model",
          "columns": [
            {
              "expression": "fragment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "model_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_embedding_vector_hnsw": {
          "name": "idx_embedding_vector_hnsw",
          "columns": [
            {
              "expression": "embedding_vector",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "hnsw",
          "with": {}
        }
      },
      "foreignKeys": {
        "embedding_cache_fragment_id_sense_fragments_fragment_id_fk": {
          "name": "embedding_cache_fragment_id_sense_fragments_fragment_id_fk",
          "tableFrom": "embedding_cache",
          "tableTo": "sense_fragments",
          "columnsFrom": ["fragment_id"],
          "columnsTo": ["fragment_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_embeddings_model_dims": {
          "name": "chk_embeddings_model_dims",
          "value": "(\n        (\"embedding_cache\".\"model_name\" = 'jina-embeddings-v4' and \"embedding_cache\".\"dimensions\" in (256, 1024, 1536))\n        or (\"embedding_cache\".\"model_name\" = 'openai_3_small' and \"embedding_cache\".\"dimensions\" in (256, 1024, 1536))\n        or (\"embedding_cache\".\"model_name\" = 'openai_3_large' and \"embedding_cache\".\"dimensions\" in (256, 1024, 1536))\n        or (\"embedding_cache\".\"model_name\" = 'e5_multilingual' and \"embedding_cache\".\"dimensions\" in (256, 384, 768, 1024))\n        or (\"embedding_cache\".\"model_name\" = 'custom' and \"embedding_cache\".\"dimensions\" > 0 and \"embedding_cache\".\"dimensions\" <= 1536)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.legal_documents": {
      "name": "legal_documents",
      "schema": "",
      "columns": {
        "doc_id": {
          "name": "doc_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "canonical_id": {
          "name": "canonical_id",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": true
        },
        "eli_uri": {
          "name": "eli_uri",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "short_slug": {
          "name": "short_slug",
          "type": "varchar(21)",
          "primaryKey": false,
          "notNull": false,
          "default": "generate_nanoid(21)"
        },
        "content_type": {
          "name": "content_type",
          "type": "content_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "legislative_stage": {
          "name": "legislative_stage",
          "type": "legislative_stage",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "hierarchy_level": {
          "name": "hierarchy_level",
          "type": "hierarchy_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "official_title": {
          "name": "official_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "short_title": {
          "name": "short_title",
          "type": "varchar(300)",
          "primaryKey": false,
          "notNull": false
        },
        "acronym": {
          "name": "acronym",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "draft_number": {
          "name": "draft_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "procedural_status": {
          "name": "procedural_status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "parliamentary_period": {
          "name": "parliamentary_period",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "parliamentary_session": {
          "name": "parliamentary_session",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "introduced_at": {
          "name": "introduced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "debated_at": {
          "name": "debated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "published_at": {
          "name": "published_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "entry_into_force_at": {
          "name": "entry_into_force_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "repealed_at": {
          "name": "repealed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "repealed_by_doc_id": {
          "name": "repealed_by_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_consolidated_text": {
          "name": "is_consolidated_text",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "consolidation_date": {
          "name": "consolidation_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "consolidates_doc_id": {
          "name": "consolidates_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "parent_bulletin_id": {
          "name": "parent_bulletin_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "bulletin_section": {
          "name": "bulletin_section",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "bulletin_page": {
          "name": "bulletin_page",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "original_text_url": {
          "name": "original_text_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "debate_transcript_url": {
          "name": "debate_transcript_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "enacted_text_url": {
          "name": "enacted_text_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "xml_url": {
          "name": "xml_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_metadata": {
          "name": "raw_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "department": {
          "name": "department",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "proposer_type": {
          "name": "proposer_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "proposer_name": {
          "name": "proposer_name",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata_hash": {
          "name": "metadata_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "summary_embedding": {
          "name": "summary_embedding",
          "type": "vector(256)",
          "primaryKey": false,
          "notNull": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_doc_canonical": {
          "name": "idx_doc_canonical",
          "columns": [
            {
              "expression": "canonical_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_doc_slug": {
          "name": "idx_doc_slug",
          "columns": [
            {
              "expression": "short_slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_doc_stage": {
          "name": "idx_doc_stage",
          "columns": [
            {
              "expression": "legislative_stage",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "content_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_doc_bulletin": {
          "name": "idx_doc_bulletin",
          "columns": [
            {
              "expression": "parent_bulletin_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_doc_vector_hnsw": {
          "name": "idx_doc_vector_hnsw",
          "columns": [
            {
              "expression": "summary_embedding",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "hnsw",
          "with": {}
        }
      },
      "foreignKeys": {
        "legal_documents_source_id_legislative_sources_source_id_fk": {
          "name": "legal_documents_source_id_legislative_sources_source_id_fk",
          "tableFrom": "legal_documents",
          "tableTo": "legislative_sources",
          "columnsFrom": ["source_id"],
          "columnsTo": ["source_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "legal_documents_repealed_by_doc_id_legal_documents_doc_id_fk": {
          "name": "legal_documents_repealed_by_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "legal_documents",
          "tableTo": "legal_documents",
          "columnsFrom": ["repealed_by_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "legal_documents_consolidates_doc_id_legal_documents_doc_id_fk": {
          "name": "legal_documents_consolidates_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "legal_documents",
          "tableTo": "legal_documents",
          "columnsFrom": ["consolidates_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "legal_documents_parent_bulletin_id_legal_documents_doc_id_fk": {
          "name": "legal_documents_parent_bulletin_id_legal_documents_doc_id_fk",
          "tableFrom": "legal_documents",
          "tableTo": "legal_documents",
          "columnsFrom": ["parent_bulletin_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "legal_documents_short_slug_unique": {
          "name": "legal_documents_short_slug_unique",
          "nullsNotDistinct": false,
          "columns": ["short_slug"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.legal_paths": {
      "name": "legal_paths",
      "schema": "",
      "columns": {
        "path_id": {
          "name": "path_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "start_doc_id": {
          "name": "start_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "end_doc_id": {
          "name": "end_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "path_type": {
          "name": "path_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "path_length": {
          "name": "path_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "computed_at": {
          "name": "computed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_path_endpoints": {
          "name": "idx_path_endpoints",
          "columns": [
            {
              "expression": "start_doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "end_doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "path_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "legal_paths_start_doc_id_legal_documents_doc_id_fk": {
          "name": "legal_paths_start_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "legal_paths",
          "tableTo": "legal_documents",
          "columnsFrom": ["start_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "legal_paths_end_doc_id_legal_documents_doc_id_fk": {
          "name": "legal_paths_end_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "legal_paths",
          "tableTo": "legal_documents",
          "columnsFrom": ["end_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.legislative_events": {
      "name": "legislative_events",
      "schema": "",
      "columns": {
        "event_id": {
          "name": "event_id",
          "type": "varchar(26)",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_ulid()"
        },
        "doc_id": {
          "name": "doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "outcome": {
          "name": "outcome",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_event_doc": {
          "name": "idx_event_doc",
          "columns": [
            {
              "expression": "doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "occurred_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "legislative_events_doc_id_legal_documents_doc_id_fk": {
          "name": "legislative_events_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "legislative_events",
          "tableTo": "legal_documents",
          "columnsFrom": ["doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.legislative_sources": {
      "name": "legislative_sources",
      "schema": "",
      "columns": {
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "source_code": {
          "name": "source_code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "source_name": {
          "name": "source_name",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "short_name": {
          "name": "short_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "jurisdiction": {
          "name": "jurisdiction",
          "type": "jurisdiction",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "autonomous_community": {
          "name": "autonomous_community",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "is_parliamentary": {
          "name": "is_parliamentary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_official_gazette": {
          "name": "is_official_gazette",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "provides_stage": {
          "name": "provides_stage",
          "type": "legislative_stage[]",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "base_url": {
          "name": "base_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "api_config": {
          "name": "api_config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "activated_at": {
          "name": "activated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "deactivated_at": {
          "name": "deactivated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "deactivated_reason": {
          "name": "deactivated_reason",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "last_successful_sync_at": {
          "name": "last_successful_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_failed_sync_at": {
          "name": "last_failed_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "consecutive_failures": {
          "name": "consecutive_failures",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_source_code": {
          "name": "idx_source_code",
          "columns": [
            {
              "expression": "source_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_source_jurisdiction": {
          "name": "idx_source_jurisdiction",
          "columns": [
            {
              "expression": "jurisdiction",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_source_active": {
          "name": "idx_source_active",
          "columns": [
            {
              "expression": "deactivated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"legislative_sources\".\"deactivated_at\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "legislative_sources_source_code_unique": {
          "name": "legislative_sources_source_code_unique",
          "nullsNotDistinct": false,
          "columns": ["source_code"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.query_cache_entries": {
      "name": "query_cache_entries",
      "schema": "",
      "columns": {
        "cache_id": {
          "name": "cache_id",
          "type": "varchar(32)",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_nanoid(32)"
        },
        "query_hash": {
          "name": "query_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "query_text": {
          "name": "query_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_cache_hash": {
          "name": "idx_cache_hash",
          "columns": [
            {
              "expression": "query_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cache_ttl": {
          "name": "idx_cache_ttl",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "query_cache_entries_query_hash_unique": {
          "name": "query_cache_entries_query_hash_unique",
          "nullsNotDistinct": false,
          "columns": ["query_hash"]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.reference_anchors": {
      "name": "reference_anchors",
      "schema": "",
      "columns": {
        "anchor_id": {
          "name": "anchor_id",
          "type": "varchar(26)",
          "primaryKey": true,
          "notNull": true,
          "default": "generate_ulid()"
        },
        "source_fragment_id": {
          "name": "source_fragment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "source_doc_id": {
          "name": "source_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_canonical_id": {
          "name": "target_canonical_id",
          "type": "varchar(150)",
          "primaryKey": false,
          "notNull": true
        },
        "target_doc_id": {
          "name": "target_doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "relation_type": {
          "name": "relation_type",
          "type": "relation_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "extraction_confidence": {
          "name": "extraction_confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "validated_at": {
          "name": "validated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "validated_by": {
          "name": "validated_by",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ref_source_doc": {
          "name": "idx_ref_source_doc",
          "columns": [
            {
              "expression": "source_doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "relation_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ref_unresolved": {
          "name": "idx_ref_unresolved",
          "columns": [
            {
              "expression": "source_doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"reference_anchors\".\"target_doc_id\" IS NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "reference_anchors_source_fragment_id_sense_fragments_fragment_id_fk": {
          "name": "reference_anchors_source_fragment_id_sense_fragments_fragment_id_fk",
          "tableFrom": "reference_anchors",
          "tableTo": "sense_fragments",
          "columnsFrom": ["source_fragment_id"],
          "columnsTo": ["fragment_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reference_anchors_source_doc_id_legal_documents_doc_id_fk": {
          "name": "reference_anchors_source_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "reference_anchors",
          "tableTo": "legal_documents",
          "columnsFrom": ["source_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "reference_anchors_target_doc_id_legal_documents_doc_id_fk": {
          "name": "reference_anchors_target_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "reference_anchors",
          "tableTo": "legal_documents",
          "columnsFrom": ["target_doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sense_fragments": {
      "name": "sense_fragments",
      "schema": "",
      "columns": {
        "fragment_id": {
          "name": "fragment_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "doc_id": {
          "name": "doc_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version_id": {
          "name": "version_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_normalized": {
          "name": "content_normalized",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "node_path": {
          "name": "node_path",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": true
        },
        "node_type": {
          "name": "node_type",
          "type": "node_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "node_number": {
          "name": "node_number",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "node_title": {
          "name": "node_title",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "preceding_context": {
          "name": "preceding_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "following_context": {
          "name": "following_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_1024": {
          "name": "embedding_1024",
          "type": "vector(1024)",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_256": {
          "name": "embedding_256",
          "type": "vector(256)",
          "primaryKey": false,
          "notNull": false
        },
        "valid_from": {
          "name": "valid_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "valid_until": {
          "name": "valid_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "token_count": {
          "name": "token_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "char_count": {
          "name": "char_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "word_count": {
          "name": "word_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "sequence_index": {
          "name": "sequence_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "content_fingerprint": {
          "name": "content_fingerprint",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_frag_doc_path": {
          "name": "idx_frag_doc_path",
          "columns": [
            {
              "expression": "doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "node_path",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_frag_256_hnsw": {
          "name": "idx_frag_256_hnsw",
          "columns": [
            {
              "expression": "embedding_256",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "hnsw",
          "with": {
            "m": 16,
            "ef_construction": 64
          }
        },
        "idx_frag_1024_hnsw": {
          "name": "idx_frag_1024_hnsw",
          "columns": [
            {
              "expression": "embedding_1024",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "vector_cosine_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "hnsw",
          "with": {
            "m": 16,
            "ef_construction": 64
          }
        },
        "idx_frag_doc_version": {
          "name": "idx_frag_doc_version",
          "columns": [
            {
              "expression": "doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_frag_node_type": {
          "name": "idx_frag_node_type",
          "columns": [
            {
              "expression": "node_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_frag_valid_window": {
          "name": "idx_frag_valid_window",
          "columns": [
            {
              "expression": "valid_from",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "valid_until",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_frag_doc_fingerprint": {
          "name": "idx_frag_doc_fingerprint",
          "columns": [
            {
              "expression": "doc_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "content_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sense_fragments_doc_id_legal_documents_doc_id_fk": {
          "name": "sense_fragments_doc_id_legal_documents_doc_id_fk",
          "tableFrom": "sense_fragments",
          "tableTo": "legal_documents",
          "columnsFrom": ["doc_id"],
          "columnsTo": ["doc_id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "sense_fragments_version_id_document_versions_version_id_fk": {
          "name": "sense_fragments_version_id_document_versions_version_id_fk",
          "tableFrom": "sense_fragments",
          "tableTo": "document_versions",
          "columnsFrom": ["version_id"],
          "columnsTo": ["version_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sync_runs": {
      "name": "sync_runs",
      "schema": "",
      "columns": {
        "run_id": {
          "name": "run_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid_v7()"
        },
        "source_id": {
          "name": "source_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "docs_inserted": {
          "name": "docs_inserted",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "docs_updated": {
          "name": "docs_updated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "docs_failed": {
          "name": "docs_failed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "error_log": {
          "name": "error_log",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "idx_sync_source_time": {
          "name": "idx_sync_source_time",
          "columns": [
            {
              "expression": "source_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "started_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sync_runs_source_id_legislative_sources_source_id_fk": {
          "name": "sync_runs_source_id_legislative_sources_source_id_fk",
          "tableFrom": "sync_runs",
          "tableTo": "legislative_sources",
          "columnsFrom": ["source_id"],
          "columnsTo": ["source_id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.content_type": {
      "name": "content_type",
      "schema": "public",
      "values": [
        "draft_bill",
        "draft_proposal",
        "draft_amendment",
        "bulletin_item",
        "law",
        "regulation",
        "precedent",
        "doctrine"
      ]
    },
    "public.embedding_model": {
      "name": "embedding_model",
      "schema": "public",
      "values": [
        "jina-embeddings-v4",
        "openai_3_large",
        "openai_3_small",
        "e5_multilingual",
        "custom"
      ]
    },
    "public.extraction_method": {
      "name": "extraction_method",
      "schema": "public",
      "values": [
        "regex",
        "spacy_ner",
        "transformer_ner",
        "llm_gpt4",
        "llm_claude",
        "manual_human",
        "admin_override",
        "imported"
      ]
    },
    "public.hierarchy_level": {
      "name": "hierarchy_level",
      "schema": "public",
      "values": [
        "constitucion",
        "tratado_internacional",
        "ley_organica",
        "ley_estatal",
        "real_decreto_legislativo",
        "real_decreto",
        "decreto_ley",
        "decreto",
        "orden_ministerial",
        "resolucion",
        "circular"
      ]
    },
    "public.jurisdiction": {
      "name": "jurisdiction",
      "schema": "public",
      "values": [
        "estatal",
        "andalucia",
        "aragon",
        "asturias",
        "baleares",
        "canarias",
        "cantabria",
        "castilla_la_mancha",
        "castilla_y_leon",
        "catalua",
        "extremadura",
        "galicia",
        "madrid",
        "murcia",
        "navarra",
        "pais_vasco",
        "rioja",
        "valencia",
        "ceuta",
        "melilla",
        "europea"
      ]
    },
    "public.legislative_stage": {
      "name": "legislative_stage",
      "schema": "public",
      "values": ["draft", "parliamentary", "bulletin", "approved", "enacted", "repealed", "expired"]
    },
    "public.node_type": {
      "name": "node_type",
      "schema": "public",
      "values": [
        "document",
        "preambulo",
        "book",
        "title",
        "subtitle",
        "chapter",
        "section",
        "subsection",
        "article",
        "paragraph",
        "subparagraph",
        "point",
        "letter",
        "annex",
        "disposicion_transitoria",
        "disposicion_final",
        "nota_al_pie"
      ]
    },
    "public.relation_type": {
      "name": "relation_type",
      "schema": "public",
      "values": [
        "deroga_total",
        "deroga_parcial",
        "modifica",
        "interpreta",
        "complementa",
        "transitoria",
        "cita_explicita",
        "cita_implicita",
        "glossa",
        "concordancia",
        "publicada_en"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
